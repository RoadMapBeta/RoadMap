<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RoadMap - Explore New Roads, Challenge Friends</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" href="images/roadmap.png">
    <script>
 
        if (window.location.pathname.endsWith('index.html') || window.location.pathname.endsWith('index')) {
            window.location.replace('/roadmap/');
        }
    </script>
</head>
<body>

<header>
      <a href="index.html" class="logo">RoadMap</a>
      <div class="header-links">
          <a href="credits.html" class="credits">Credits</a>
          <a href="https://github.com/RoadMapBeta" class="join-heading">
              <img class="gh-logo" src="images/github.png" alt="GitHub Logo" />
              <span>GitHub</span>
          </a>
      </div>
  </header>


    <div class="center">
        <div class="xl-text">
            Discover new <span class="road-texture">roads</span>. <br />
            Forge your own path.
        </div>
        <div class="subtext">Redefining Exploration, One Road at a Time.</div>
    </div>

    <div class="email-form">
        <form id="waitlist-form">
            <input
              type="email"
              id="email"
              name="email"
              autocomplete="on"
              placeholder="Enter your email address"
              required
            />
            <button type="submit">Join Waitlist</button>
        </form>
    </div>


    <div id="toast" class="toast hidden" role="alert">
      <svg style="width:15px;" class="w-5 h-5 text-blue-600 dark:text-blue-500 rotate-45" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 20">
        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 17 8 2L9 1 1 19l8-2Zm0 0V9"/>
      </svg>
      <div class="toast-message">Email registered successfully.</div>
    </div>

    <section class="features-section">
        <div class="features-container">
            <div class="feature-item">
                <img src="./images/road.png" alt="Discover Roads" class="feature-image" />
                <h3 class="feature-title">Discover New Roads</h3>
                <p>Discover scenic areas and add new roads to your collection!</p>
            </div>
            <div class="feature-item">
                <img src="./images/trophy.png" alt="Challenge Friends" class="feature-image" />
                <h3 class="feature-title">Challenge Friends</h3>
                <p>Compete with friends to explore and discover the most roads in your area.</p>
            </div>
            <div class="feature-item">
                <img src="./images/map.png" alt="Map Skins" class="feature-image" />
                <h3 class="feature-title">Unlock Map Skins</h3>
                <p>Customize your map with unique skins earned by completing challenges.</p>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="road">
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
        </div>
        <div class="footer-vehicles">
            <img src="images/car.png" alt="Car driving" class="car-img" />
            <img src="images/bus.png" alt="Bus driving" class="bus-img" />
            <img src="images/truck.png" alt="Truck driving" class="truck-img" />
        </div>
        <div class="footer-content">
            <div class="footer-logo">RoadMap</div>
            <p class="footer-description">Coming soon to iOS and Android. Powered by TomTom.</p>
            <div class="social-icons">
                <a href="https://github.com/RoadMapBeta"><img src="images/github.png" alt="GitHub" class="img-logo" /></a>
                <a href="https://x.com/roadmapbeta"><img src="images/x-social.png" alt="X" class="x-social" /></a>
                <a href="https://www.facebook.com/profile.php?id=61566742735877"><img src="images/facebook.webp" alt="Facebook" class="img-logo" /></a>
                <a href="https://discord.gg/EHfCqHw9"><img src="images/discord.png" alt="Discord" class="img-logo" /></a>
                <a href="mailto:roadmapbeta@gmail.com"><img src="images/gmail.png" alt="Gmail" class="img-logo" /></a>
            </div>
        </div>
    </footer>

    <script>
const webhookURL = "https://discord.com/api/webhooks/1299910471142604831/ltYzQP8epJVSl3mGFju49jkuvd5r7Qtl-t0q-jNefyYLg_nin_gru5B_zDa_XGe6Vq0D";
const emojiCheck = "✅";
const emojiX = "❌";

const proofyConfig = {
    apiKey: "dj1P1tAe7Jaseqo9lcd57",
    userId: "68502",
};

function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

async function checkEmailValidity(email) {
    const url = `https://corsproxy.io/?https://api.proofy.io/verifyaddr?aid=${proofyConfig.userId}&key=${proofyConfig.apiKey}&email=${email}`;
    try {
        const response = await fetch(url);
        const data = await response.json();
        return data.cid ? data.cid : null;
    } catch (error) {
        console.error("Error with Proofy API:", error);
    }
}

async function getEmailCheckResult(checkId) {
    const url = `https://corsproxy.io/?https://api.proofy.io/getresult?aid=${proofyConfig.userId}&key=${proofyConfig.apiKey}&cid=${checkId}`;
    try {
        const response = await fetch(url);
        const data = await response.json();
        if (data.checked && data.result.length > 0) {
            return data.result[0].status === 1 ? "deliverable" : "undeliverable";
        }
    } catch (error) {
        console.error("Error with Proofy result API:", error);
    }
}

document.getElementById("waitlist-form").addEventListener("submit", async function (e) {
    e.preventDefault();
    const email = document.getElementById("email").value;

    if (!isValidEmail(email)) {
        return;
    }

    const checkId = await checkEmailValidity(email);
    if (!checkId) {
        return;
    }

    const result = await getEmailCheckResult(checkId);
    if (!result) {
        return;
    }

    const emoji = result === "deliverable" ? emojiCheck : emojiX;
    const message = {
        content: `${emoji} **New User Joined!** (${email})`
    };

    fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(message),
    })
    .then(response => {
        if (response.ok) {
            const toast = document.getElementById("toast");
            toast.classList.remove("hidden");
            setTimeout(() => toast.classList.add("hidden"), 3000);
            document.getElementById("email").value = "";
        } else {
            console.error("Error sending message to Discord:", response.statusText);
        }
    })
    .catch(error => console.error("Error:", error));
});

    </script>

</body>
</html>
